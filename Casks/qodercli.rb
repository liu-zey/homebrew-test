# This file was generated by GoReleaser. DO NOT EDIT.
cask "qodercli" do
  # 安装二进制文件
  binary "qodercli"

  # 安装后创建源标记 - 用于更新检测
  postflight do
    # 创建安装源标记文件
    marker_path = if OS.mac?
      "#{HOMEBREW_PREFIX}/bin/.qodercli-install-resource"
    else
      "#{staged_path}/.qodercli-install-resource"
    end
    File.write(marker_path, "homebrew-cask")

    # 测试安装
    system "#{staged_path}/qodercli", "--version"
  end

  name "qodercli"
  desc "Qoder AI CLI tool - Terminal-based AI assistant for code development"
  homepage "https://qoder.com"
  version "0.0.10-alpha.3"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "qodercli"

  on_macos do
    on_intel do
      url "https://qs-cli-dev.oss-cn-hangzhou.aliyuncs.com/qodercli/releases/#{version}/qodercli_#{version}_darwin_amd64.zip"
      sha256 "33f6dd3876d2d46c9be3f0ba7a3439d191461f8317267000ac94e3eee3f81b51"
    end
    on_arm do
      url "https://qs-cli-dev.oss-cn-hangzhou.aliyuncs.com/qodercli/releases/#{version}/qodercli_#{version}_darwin_arm64.zip"
      sha256 "b3439e55819ce7f2e5ba7ea4af103dc645fd761860262bd7a8f42d5bdd031373"
    end
  end

  on_linux do
    on_intel do
      url "https://qs-cli-dev.oss-cn-hangzhou.aliyuncs.com/qodercli/releases/#{version}/qodercli_#{version}_linux_amd64.tar.gz"
      sha256 "0229bc6b17d2511e5395c5a08d20a92a48e24f747abab1ba6f0be68d12b807f8"
    end
    on_arm do
      url "https://qs-cli-dev.oss-cn-hangzhou.aliyuncs.com/qodercli/releases/#{version}/qodercli_#{version}_linux_arm64.tar.gz"
      sha256 "f6f847407b132ba334cace8ce0b8b26a496bc64c80e259b9a352d6962d33b05f"
    end
  end

  # No zap stanza required
end
